<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>떠나조</title>
    <script th:src="@{/script/global/jquery.js}"></script>
    <script th:src="@{/script/index.js}"></script>
    <script th:src="@{/script/fragments/slidePanel.js}"></script>
    <link rel="stylesheet" th:href="@{/css/index.css}">
    <link rel="stylesheet" th:href="@{/css/fragments/header.css}">
    <link rel="stylesheet" th:href="@{/css/fragments/slidePanel.css}">
    <script>
        window.onload = function () {
            document.querySelectorAll(".limited-text").forEach(function (el) {
                const maxHeight = 200;
                if (el.scrollHeight > maxHeight) {
                    el.style.maxHeight = maxHeight + "px";
                    el.style.overflow = "hidden";
                    el.style.position = "relative";

                    const fade = document.createElement("div");
                    fade.style.position = "absolute";
                    fade.style.bottom = "0";
                    fade.style.right = "0";
                    fade.style.width = "100%";
                    fade.style.height = "30px";
                    fade.style.background = "linear-gradient(to bottom, transparent, white)";
                    el.appendChild(fade);
                }
            });
        }
    </script>
</head>
<body>
    <div th:insert="~{fragments/header::top-bar}"></div>
    <div th:insert="~{fragments/slidePanel::slide-panel}"></div>

    <section class="scroll-section">
        <div class="content title">
            <span class="eng-title">Let’s Leave</span>
            <span class="kr-title">고민 없이 떠나조</span>
        </div>
    </section>
    <!-- 추가 섹션: 스크롤하면 다른 콘텐츠가 나타납니다 -->
    <section class="scroll-section">
        <div class="content">
            <div th:each="i : ${#numbers.sequence(0, guides.size() - 1)}" th:if="${i % 4 == 0}" class="guide-row">
                <div class="guide-card">
                    <img class="guide-img" th:src="${baseStaticURL} + '/images/guide/' + ${guides[i].titleImg}">
                    <h3 class="guide-title" th:text="${guides[i].title}"></h3>
                    <div th:utext="${guides[i].content}" class="limited-text"></div>
                </div>
                <div class="guide-card">
                    <img class="guide-img" th:src="${baseStaticURL} + '/images/guide/' + ${guides[i+1].titleImg}">
                    <h3 class="guide-title" th:text="${guides[i+1].title}"></h3>
                    <div th:utext="${guides[i+1].content}" class="limited-text"></div>
                </div>
                <div class="guide-card">
                    <img class="guide-img" th:src="${baseStaticURL} + '/images/guide/' + ${guides[i+2].titleImg}">
                    <h3 class="guide-title" th:text="${guides[i+2].title}"></h3>
                    <div th:utext="${guides[i+2].content}" class="limited-text"></div>
                </div>
                <div class="guide-card">
                    <img class="guide-img" th:src="${baseStaticURL} + '/images/guide/' + ${guides[i+3].titleImg}">
                    <h3 class="guide-title" th:text="${guides[i+3].title}"></h3>
                    <div th:utext="${guides[i+3].content}" class="limited-text"></div>
                </div>
            </div>
        </div>
    </section>
</body>
</html>
